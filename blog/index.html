<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
        <meta name="description" content="The latest blog posts by Nick Knowlson.">

        <title>Blog | Nick Knowlson</title>

        <link rel="stylesheet" type="text/css" href="/css/inuit.css" >
        <link rel="stylesheet" type="text/css" href="/css/style.css" >
        <link rel="stylesheet" type="text/css" href="/css/syntax.css" >
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="apple-touch-icon-precomposed" href="/favicon.ico" >
        <link href="http://feeds.feedburner.com/NickKnowlson" type="application/atom+xml" rel="alternate" title="Blog ATOM Feed" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>

        
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-24781362-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
    </head>
    <body>
	<div id="header" class="grid grid-16">
            <a href="/"><img src="/img/logos/logo6.png" alt="logo" /></a>
            <ul id="nav">
                <li><a class="" href="/">Home</a></li>
                <li><a class="" href="/about/">About</a></li>
                <li><a class="" href="/projects/">Projects</a></li>
                <li><a class="selected" href="/blog/">Blog</a></li>
                <li><a class="" href="/contact/">Contact</a></li>
            </ul>
	</div>

        <div id="content" class="grid grid-16" style="background-color:white; clear:both;">
            <div style="padding:25px">
                <div style="text-align:center;"><b>Latest Posts</b> | <a href="/blog/archive/">Archive</a></div>

  <div>
  <h1 style="margin:0px"><a href="/blog/2011/12/18/seven-languages-week-2-day-1/">
  Seven Languages In Seven Weeks: Week 2 (Io) - Day 1
  </a></h1>
  <div class="faded" style="font-size:14px; margin-bottom:5px;">18 Dec 2011</div>
  <p>Day 1 of Io is the first of many chapters that will give me that &#8216;new at programming&#8217; feeling again, where I fumble just trying to build a valid expression that does what I want it to. I actually like that feeling; it means I am learning something new and a web of structures is forming in my mind. I like it <em>almost</em> as much as finally making that first deep connection from a group of new concepts to some of your existing ones, and starting to grasp the parallels. Fortunately for me, that is what this book is all about!</p>
<div class='interjection'><p>
(This article is part of a series of posts I am doing about my journey through the exercises of the book <a href='http://pragprog.com/book/btlang/seven-languages-in-seven-weeks'>Seven Languages In Seven Weeks</a>. The article previous to this one is <a href='/blog/2011/12/15/seven-languages-week-1-day-3/'>Week 1 (Ruby) - Day 3</a>. For an overview see the <a href='/projects/seven-languages-in-seven-weeks/'>project page</a>.)
</p></div>
<h2 id='how_io_feels'>How Io feels</h2>

<p>Syntactically, Io is a very very lightweight language, evocative of lisps in its regularity and minimalism. It provides a nice contrast with the previous chapter on Ruby. Ruby&#8217;s definition of simple code is something like &#8220;The more an expression reads like a (succinct) explanation of its intent, the better&#8221; whereas Io&#8217;s definition of simple code is something like &#8220;The less extraneous syntax that is needed to represent an expression, the better&#8221;.</p>

<p>Because of this approach, Io lends itself very well to metaprogramming &#8211; at least as well as Ruby does, possibly better. It does not have as the wide and varied set of built-in metaprogramming tools that Ruby does, but it also needs far fewer due to the way the language is constructed. Io is a <a href='http://en.wikipedia.org/wiki/Prototype-based_programming'>prototype-based</a> language, the first of the less familiar programming paradigms in this book. I won&#8217;t go into depth about this here except to note that Javascript is prototype-based as well, so learning Io could be very beneficial to anyone that does a fair amount of programming Javascript.</p>

<h2 id='highlights_from_exercises'>Highlights from exercises</h2>

<p>The homework this week is short but well-constructed. It points out a couple of things that are important to remember for a newbie to Io. In particular, you will need <code>slotNames</code> a lot, so remember that one!</p>

<p>Here is my full code listing for the exercises from Day 1 of Io. The home of this piece of code is with the other exercises <a href='https://github.com/nickknw/seven-languages-in-seven-weeks/blob/master/week-2-io/day1.io'>on github</a>.</p>
<div class='highlight'><pre><code class='io'><span class='c1'># Find:</span>
<span class='c1'>#   Some Io example problems</span>
<span class='c1'>#       http://www.iolanguage.com/about/samplecode/</span>
<span class='c1'>#</span>
<span class='c1'>#   An Io community that will answer questions</span>
<span class='c1'>#       http://tech.groups.yahoo.com/group/iolanguage/messages</span>
<span class='c1'>#       http://stackoverflow.com/questions/tagged/iolanguage</span>
<span class='c1'>#       #io on freenode</span>
<span class='c1'>#       http://www.reddit.com/r/iolanguage</span>
<span class='c1'>#</span>
<span class='c1'>#   A style guide with Io idioms</span>
<span class='c1'>#       http://en.wikibooks.org/wiki/Io_Programming/Io_Style_Guide</span>
<span class='c1'>#</span>
<span class='c1'># Answer:</span>
<span class='c1'>#</span>
<span class='c1'># 1. Evaluate 1 + 1 and then 1 + &quot;one&quot;. Is Io strongly typed or weakly typed?</span>
<span class='c1'>#</span>
<span class='c1'>#   Strongly typed. Trying to run `1 + &quot;one&quot;` throws an exception that says:</span>
<span class='c1'>#       &quot;Exception: argument 0 to method &#39;+&#39; must be a Number, not a &#39;Sequence&#39;&quot;</span>
<span class='c1'>#   </span>
<span class='c1'># 2. Is 0 true or false? What about the empty string? Is nil true or false?</span>

<span class='k'>if</span><span class='o'>(</span><span class='mf'>0</span><span class='o'>)</span> <span class='n'>println</span>   <span class='c1'># true</span>
<span class='k'>if</span><span class='o'>(</span><span class='s'>&quot;&quot;</span><span class='o'>)</span> <span class='n'>println</span>  <span class='c1'># true</span>
<span class='k'>if</span><span class='o'>(</span><span class='no'>nil</span><span class='o'>)</span> <span class='n'>println</span> <span class='c1'># false</span>

<span class='c1'># 3. How can you tell what slots a prototype supports?</span>
<span class='c1'># &lt;prototype&gt; slotNames</span>

<span class='n'>Zerg</span> <span class='o'>:=</span> <span class='n'>Object</span> <span class='k'>clone</span>
<span class='n'>Zerg</span> <span class='n'>sixPool</span> <span class='o'>:=</span> <span class='s'>&quot;Zergling rush!&quot;</span>
<span class='n'>Zerg</span> <span class='n'>slotNames</span> <span class='n'>println</span>  <span class='c1'># will print list(type, sixPool)</span>

<span class='c1'># 4. What is the difference between = (equals), := (colon equals), and ::=</span>
<span class='c1'># (colon colon equals)? When would you use each one?</span>
<span class='c1'>#</span>
<span class='c1'># =     is used to assign something to an existing slot</span>
<span class='c1'># :=    is used to assign something to a previously non-existent slot</span>
<span class='c1'># ::=   is used to assign something to a previously non-existent slot as well as</span>
<span class='c1'>#       create a setter for that slot</span>
<span class='c1'>#   </span>
<span class='c1'>#   iolanguage.com&#39;s guide puts this much much better than I did:</span>
<span class='c1'>#</span>
<span class='c1'># ::= 	Creates slot, creates setter, assigns value</span>
<span class='c1'># := 	Creates slot, assigns value</span>
<span class='c1'># = 	Assigns value to slot if it exists, otherwise raises exception </span>
<span class='c1'>#</span>
<span class='c1'>#</span>
<span class='c1'># Do:</span>
<span class='c1'>#</span>
<span class='c1'># 1. Run an Io program from a file.</span>
<span class='c1'>#</span>
<span class='c1'># From the command line run: io day1.io</span>
<span class='c1'>#</span>

<span class='s'>&quot;successfully ran day1&quot;</span> <span class='n'>println</span>

<span class='c1'># 2.Execute the code in a slot given its name.</span>
<span class='c1'>#</span>
<span class='c1'># I&#39;m not quite sure I understood this question. I&#39;ll answer the two</span>
<span class='c1'># interpretations I could come up with.</span>
<span class='c1'>#</span>
<span class='c1'># If the code in a slot is stored as a method then just invoking the slot is</span>
<span class='c1'># enough:</span>

<span class='n'>Zerg</span> <span class='n'>macroItUp</span> <span class='o'>:=</span> <span class='k'>method</span><span class='o'>(</span><span class='s'>&quot;Injecting larvae now!&quot;</span> <span class='n'>println</span><span class='o'>)</span>
<span class='n'>Zerg</span> <span class='n'>macroItUp</span> <span class='c1'># Will print &quot;Injecting larvae now!&quot;</span>

<span class='c1'># If the code in a slot is stored as a string then you should use something like</span>
<span class='c1'># doString:</span>

<span class='n'>Zerg</span> <span class='n'>macroHarderSteps</span> <span class='o'>:=</span> <span class='o'>(</span><span class='s'>&quot;\&quot;Spreading creep now!\&quot; println&quot;</span><span class='o'>)</span>
<span class='n'>Zerg</span> <span class='n'>macroHarder</span> <span class='o'>:=</span> <span class='k'>method</span><span class='o'>(</span><span class='k'>doString</span><span class='o'>(</span><span class='n'>Zerg</span> <span class='n'>macroHarderSteps</span><span class='o'>))</span>
<span class='n'>Zerg</span> <span class='n'>macroHarder</span>

<span class='c1'># Update: Re-reading this now the intent of the question seems obvious! Write a</span>
<span class='c1'># method that, given a method name, will try to execute that method.</span>
<span class='s'>&quot;\nLet&#39;s try that again&quot;</span> <span class='n'>println</span>
<span class='n'>Zerg</span> <span class='n'>specifyMacro</span> <span class='o'>:=</span> <span class='k'>method</span><span class='o'>(</span><span class='n'>name</span><span class='o'>,</span> <span class='n'>perform</span><span class='o'>(</span><span class='n'>name</span><span class='o'>))</span>
<span class='n'>Zerg</span> <span class='n'>specifyMacro</span><span class='o'>(</span><span class='s'>&quot;macroItUp&quot;</span><span class='o'>)</span>
<span class='n'>Zerg</span> <span class='n'>specifyMacro</span><span class='o'>(</span><span class='s'>&quot;macroHarder&quot;</span><span class='o'>)</span>
<span class='s'>&quot;Done!&quot;</span> <span class='n'>println</span>
</code></pre>
</div>
<p>And the output:</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>io day1.io
<span class='nb'>true</span>
<span class='nb'>true</span>
<span class='nb'>false</span>
list<span class='o'>(</span><span class='nb'>type</span>, sixPool<span class='o'>)</span>
successfully ran day1
Injecting larvae now!
Spreading creep now!

Let<span class='err'>&#39;</span>s try that again
Injecting larvae now!
Spreading creep now!
Done!
</code></pre>
</div>
  </div>

  <div style="margin-top:20px; font-size:14px;">
    <a href="/blog/2011/12/18/seven-languages-week-2-day-1/#disqus_thread" data-disqus-identifier="/blog/2011/12/18/seven-languages-week-2-day-1">Comments</a>
  </div>

    <hr class="fancyrule" />

  <div>
  <h1 style="margin:0px"><a href="/blog/2011/12/15/seven-languages-week-1-day-3/">
  Seven Languages In Seven Weeks: Week 1 (Ruby) - Day 3
  </a></h1>
  <div class="faded" style="font-size:14px; margin-bottom:5px;">15 Dec 2011</div>
  <p>Day 3 is about metaprogramming: writing code that writes code. Now we are really getting into the meat of Ruby, exploring some of the things that things that set it apart from other languages. Ruby has a powerful and varied toolset to make metaprogramming easy and natural. It gives you full control to tweak and patch built in classes, and even makes it convenient. These tools(SYN) can combine with its flexible syntax to let you create readable internal DSLs especially easily.</p>
<div class='interjection'><p>
(This article is part of a series of posts I am doing about my journey through the exercises of the book <a href='http://pragprog.com/book/btlang/seven-languages-in-seven-weeks'>Seven Languages In Seven Weeks</a>. The article previous to this one is <a href='/blog/2011/12/04/seven-languages-week-1-day-2/'>Week 1 (Ruby) - Day 2</a>. For an overview see the <a href='/projects/seven-languages-in-seven-weeks/'>project page</a>.)
</p></div>
<h2 id='topics_covered'>Topics covered</h2>

<p>This was a fairly quick week, with only a few topics and one homework question. Not that this is a bad thing necessarily &#8211; in the end it turned out to be a nice break before the tough stuff really started. The main three topics in Day 3 were: open classes, method_missing, and mixins.</p>
<h3>Open classes</h3>
<p>In Ruby you have the power to modify or add to any class, even the built-in ones. You can open up the String class and add a new method called <code>quack()</code>, or redefine <code>size()</code> to return a random integer. Using this power without restraint can lead to pretty impressive messes of spaghetti code.</p>

<p>Modifying existing classes at runtime in this way has become known as <a href='http://en.wikipedia.org/wiki/Monkey_patch'>monkey patching</a>, and also (my favorite) <a href='http://www.ericdelabar.com/2008/05/metaprogramming-javascript.html'>duck punching</a>:</p>

<blockquote>
<p>Well, I was just totally sold by Adam, the idea being that if it walks like a duck and talks like a duck, it’s a duck, right? So if this duck is not giving you the noise that you want, you’ve got to just punch that duck until it returns what you expect. &#8211; Patrick Ewing</p>
</blockquote>

<p>You&#8217;ve got to just <em>punch</em> that duck.</p>
<h3>Method_missing</h3>
<p>This special method gets called any time a method that doesn&#8217;t exist is called. If you implement it you have access to the name and arguments of the method that was called. In the book, Bruce Tate gives an example of using this to create a nice way to specify roman numerals. The result is that you can say <code>roman.X</code>, <code>roman.III</code>, <code>roman.CXII</code>, etc.</p>

<p>I saw another example of <code>method_missing</code>&#8217;s power in Chapter 8 of <a href='http://shop.oreilly.com/product/9780596516178.do'>The Ruby Programming Language</a>, where a simple DSL for generating html is created. This is what it looks like in use:</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>pagetitle</span> <span class='o'>=</span> <span class='s2'>&quot;Test Page for XML.generate&quot;</span>
<span class='no'>XML</span><span class='o'>.</span><span class='n'>generate</span><span class='p'>(</span><span class='no'>STDOUT</span><span class='p'>)</span> <span class='k'>do</span>
  <span class='n'>html</span> <span class='k'>do</span>
    <span class='n'>head</span> <span class='k'>do</span>
      <span class='n'>title</span> <span class='p'>{</span> <span class='n'>pagetitle</span> <span class='p'>}</span>
      <span class='n'>comment</span> <span class='s2'>&quot;This is a test&quot;</span>
    <span class='k'>end</span>
    <span class='n'>body</span> <span class='k'>do</span>
      <span class='n'>h1</span><span class='p'>(</span><span class='ss'>:style</span> <span class='o'>=&gt;</span> <span class='s2'>&quot;font-family:sans-serif&quot;</span><span class='p'>)</span> <span class='p'>{</span> <span class='n'>pagetitle</span> <span class='p'>}</span>
      <span class='n'>ul</span> <span class='ss'>:type</span><span class='o'>=&gt;</span><span class='s2'>&quot;square&quot;</span> <span class='k'>do</span>
        <span class='n'>li</span> <span class='p'>{</span> <span class='no'>Time</span><span class='o'>.</span><span class='n'>now</span> <span class='p'>}</span>
        <span class='n'>li</span> <span class='p'>{</span> <span class='no'>RUBY_VERSION</span> <span class='p'>}</span>
      <span class='k'>end</span>
    <span class='k'>end</span>
  <span class='k'>end</span>
<span class='k'>end</span>
</code></pre>
</div>
<p>The implementation is fairly short: they create a basic XML class in only 53 well-commented lines. If you&#8217;re interested, the code examples are available for inspection from <a href='http://www.davidflanagan.com/rpl/'>David Flanagan&#8217;s website</a>. For convenience, here is a link <a href='/RPL_XML.txt'>directly to this snippet of code</a>.</p>
<h3>Mixins</h3>
<p>Mixins are a way for a class to include code from a module inside itself. Imagine a class including a module with a <code>Meow()</code> method. This would let you call <code>Meow()</code> on any instance of that class. Combined with open classes and the ability to add or change methods at runtime, this makes it easy to package and use code that changes code.</p>

<p>As I understand it, ActiveRecord in Rails is sort of the poster child for how metaprogramming using mixins. It will customize your domain models at runtime with many things, including accessors using the column names from the database. I admit I don&#8217;t know a lot about the details of this area, but there is a whole book dedicated to <a href='http://pragprog.com/book/ppmetr/metaprogramming-ruby'>metaprogramming in Ruby</a> that I plan on reading someday.</p>

<h2 id='what_was_missing'>What was missing</h2>

<p>Surprisingly, an entire category of useful metaprogramming tools are are almost skipped right over in Day 3. There are a lot of great methods to interact with and create methods and classes on the fly, and these are only given a passing mention in one of the examples. Methods like <code>define_method</code>, <code>alias_method</code>, the different versions of <code>eval</code>, or <code>methods.grep</code>.</p>

<p>With these tools Ruby gives you, without much effort you can do things like: find all methods that have a name like <code>/check.*/</code>, systematically rename those methods, and replace them with a method that does something (like logging) and THEN execute the method.</p>

<p>Ola Bini has a great <a href='http://ola-bini.blogspot.com/2006/09/ruby-metaprogramming-techniques.html'>post about metaprogramming in Ruby</a> that talks about these techniques and more. I recommend it if you have been at all interested this post so far, it is well worth reading.</p>

<h2 id='highlights_from_exercise'>Highlights from exercise</h2>

<p>There was not very much to do for the homework questions this week, unfortunately, just one fairly short exercise. This day in particular was one that I think could have used some really cool examples. Metaprogramming has a lot of depth and exciting possibilities, and this chapter could have shown that off more with better exercises.</p>

<p>Anyway, the exercise for this day shows some basic usage of <code>method_missing</code>. The existing ActsAsCsv module is given to you to extend, so the most interesting bit of code in the exercise is the definition of <code>method_missing</code> in CsvRow. It takes the name of the method and attempts to return the rows from the column that has that name.</p>
<div class='highlight'><pre><code class='ruby'><span class='k'>def</span> <span class='nf'>method_missing</span> <span class='nb'>name</span><span class='p'>,</span> <span class='o'>*</span><span class='n'>args</span>
    <span class='n'>content_index</span> <span class='o'>=</span> <span class='vi'>@header_row</span><span class='o'>.</span><span class='n'>index</span><span class='p'>(</span><span class='nb'>name</span><span class='o'>.</span><span class='n'>to_s</span><span class='p'>)</span>
    <span class='k'>return</span> <span class='vi'>@content_row</span><span class='o'>[</span><span class='n'>content_index</span><span class='o'>]</span>
<span class='k'>end</span>
</code></pre>
</div>
<p>Here is my full code listing for the exercises from Day 3 of Ruby. The home of this piece of code is with the other exercises <a href='https://github.com/nickknw/seven-languages-in-seven-weeks/blob/master/week-1-ruby/day3.rb'>on github</a>.</p>
<div class='highlight'><pre><code class='ruby'><span class='c1'>#Do:</span>
<span class='c1'># 1. Modify the CSV application to support an each method to return a CsvRow</span>
<span class='c1'># object. Use method_missing on that CsvRow to return the value for the column</span>
<span class='c1'># for a given heading.</span>

<span class='k'>module</span> <span class='nn'>ActsAsCsv</span>

    <span class='k'>def</span> <span class='nc'>self</span><span class='o'>.</span><span class='nf'>included</span><span class='p'>(</span><span class='n'>base</span><span class='p'>)</span>
        <span class='n'>base</span><span class='o'>.</span><span class='n'>extend</span> <span class='no'>ClassMethods</span>
    <span class='k'>end</span>

    <span class='k'>module</span> <span class='nn'>ClassMethods</span>
        <span class='k'>def</span> <span class='nf'>acts_as_csv</span>
            <span class='kp'>include</span> <span class='no'>InstanceMethods</span>
        <span class='k'>end</span>
    <span class='k'>end</span>

    <span class='k'>module</span> <span class='nn'>InstanceMethods</span>

        <span class='kp'>attr_accessor</span> <span class='ss'>:headers</span><span class='p'>,</span> <span class='ss'>:csv_rows</span>

        <span class='k'>def</span> <span class='nf'>read</span>
            <span class='vi'>@csv_rows</span> <span class='o'>=</span> <span class='o'>[]</span>
            <span class='n'>file</span> <span class='o'>=</span> <span class='no'>File</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='nb'>self</span><span class='o'>.</span><span class='n'>class</span><span class='o'>.</span><span class='n'>to_s</span><span class='o'>.</span><span class='n'>downcase</span> <span class='o'>+</span> <span class='s1'>&#39;.txt&#39;</span><span class='p'>)</span>
            <span class='vi'>@headers</span> <span class='o'>=</span> <span class='n'>file</span><span class='o'>.</span><span class='n'>gets</span><span class='o'>.</span><span class='n'>chomp</span><span class='o'>.</span><span class='n'>split</span><span class='p'>(</span><span class='s1'>&#39;, &#39;</span><span class='p'>)</span>

            <span class='n'>file</span><span class='o'>.</span><span class='n'>each</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>row</span><span class='o'>|</span>
                <span class='n'>csv_contents</span> <span class='o'>=</span> <span class='n'>row</span><span class='o'>.</span><span class='n'>chomp</span><span class='o'>.</span><span class='n'>split</span><span class='p'>(</span><span class='s1'>&#39;, &#39;</span><span class='p'>)</span>
                <span class='vi'>@csv_rows</span> <span class='o'>&lt;&lt;</span> <span class='no'>CsvRow</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='vi'>@headers</span><span class='p'>,</span> <span class='n'>csv_contents</span><span class='p'>)</span>
            <span class='k'>end</span>
        <span class='k'>end</span>

        <span class='k'>def</span> <span class='nf'>initialize</span>
            <span class='n'>read</span>
        <span class='k'>end</span>

        <span class='k'>def</span> <span class='nf'>each</span> <span class='o'>&amp;</span><span class='n'>block</span>
            <span class='vi'>@csv_rows</span><span class='o'>.</span><span class='n'>each</span> <span class='o'>&amp;</span><span class='n'>block</span>
        <span class='k'>end</span>

    <span class='k'>end</span>

    <span class='k'>class</span> <span class='nc'>CsvRow</span>
        <span class='kp'>attr_accessor</span> <span class='ss'>:header_row</span><span class='p'>,</span> <span class='ss'>:content_row</span>

        <span class='k'>def</span> <span class='nf'>initialize</span><span class='p'>(</span><span class='n'>header_row</span><span class='p'>,</span> <span class='n'>content_row</span><span class='p'>)</span>
            <span class='vi'>@header_row</span> <span class='o'>=</span> <span class='n'>header_row</span>
            <span class='vi'>@content_row</span> <span class='o'>=</span> <span class='n'>content_row</span>
        <span class='k'>end</span>

        <span class='k'>def</span> <span class='nf'>method_missing</span> <span class='nb'>name</span><span class='p'>,</span> <span class='o'>*</span><span class='n'>args</span>
            <span class='n'>content_index</span> <span class='o'>=</span> <span class='vi'>@header_row</span><span class='o'>.</span><span class='n'>index</span><span class='p'>(</span><span class='nb'>name</span><span class='o'>.</span><span class='n'>to_s</span><span class='p'>)</span>
            <span class='k'>return</span> <span class='vi'>@content_row</span><span class='o'>[</span><span class='n'>content_index</span><span class='o'>]</span>
        <span class='k'>end</span>
    <span class='k'>end</span>
<span class='k'>end</span>

<span class='k'>class</span> <span class='nc'>RubyCsv</span> 
    <span class='kp'>include</span> <span class='no'>ActsAsCsv</span>
    <span class='n'>acts_as_csv</span>
<span class='k'>end</span>

<span class='n'>csv</span> <span class='o'>=</span> <span class='no'>RubyCsv</span><span class='o'>.</span><span class='n'>new</span>
<span class='n'>csv</span><span class='o'>.</span><span class='n'>each</span> <span class='p'>{</span><span class='o'>|</span><span class='n'>row</span><span class='o'>|</span> <span class='nb'>puts</span> <span class='n'>row</span><span class='o'>.</span><span class='n'>one</span><span class='p'>}</span>
</code></pre>
</div>
<p>And the output (given the sample file in my github repo):</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>ruby day3.rb
lions
han
chewbacca
r2 d2
anakin skywalker
leia organa
threepio
jawa
emperor palpatine
darth sidious
bail organa
vader
</code></pre>
</div>
<p>Next in this series: <a href='/blog/2011/12/18/seven-languages-week-2-day-1/'>Day 1 of Io</a></p>
  </div>

  <div style="margin-top:20px; font-size:14px;">
    <a href="/blog/2011/12/15/seven-languages-week-1-day-3/#disqus_thread" data-disqus-identifier="/blog/2011/12/15/seven-languages-week-1-day-3">Comments</a>
  </div>

    <hr class="fancyrule" />

  <div>
  <h1 style="margin:0px"><a href="/blog/2011/12/04/seven-languages-week-1-day-2/">
  Seven Languages In Seven Weeks: Week 1 (Ruby) - Day 2
  </a></h1>
  <div class="faded" style="font-size:14px; margin-bottom:5px;">04 Dec 2011</div>
  <p>Day 2 of Ruby covers collections, code blocks, classes and modules. I&#8217;m familiar enough with these already in Ruby so in this case it will be hard to provide a &#8216;learning the language&#8217; perspective. Instead I will try to highlight a few of the parts of Ruby in this chapter that I particularly like.</p>
<div class='interjection'><p>
(This article is part of a series of posts I am doing about my journey through the exercises of the book <a href='http://pragprog.com/book/btlang/seven-languages-in-seven-weeks'>Seven Languages In Seven Weeks</a>. The article previous to this one is <a href='/blog/2011/11/27/seven-languages-week-1-day-1/'>Week 1 (Ruby) - Day 1</a>. For an overview see the <a href='/projects/seven-languages-in-seven-weeks/'>project page</a>.)
</p></div>
<p>Ruby has closures and first-class functions - code blocks are one way of creating a Proc - an anonymous function. A Proc is almost but not quite a lambda - there are <a href='http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/'>a few differences between them</a>, and Ruby has a separate <code>lambda</code> method for creating those.</p>

<p>Ruby&#8217;s arrays and hashes are very multipurpose: hashes are frequently used to give a method named parameters; and arrays have built in methods so that they can be used as queues, stacks, sets, and matrices.</p>

<p>Its syntax is consistent and pretty. Arrays are very rich, you can do ranges (<code>[1..10]</code>), negative indexes (<code>&quot;string&quot;[1..-2]</code>), and there are convenience methods for operations like push, pop, transpose, and set intersection. You have the three basic list manipulating higher order function equivalents: map, filter, reduce (fold).</p>

<p>There are many useful methods you can call right off of number literals. One common example is <code>times</code>, which takes a code block as a parameter and executes it. This can sometimes be a nice way to express a loop: <code>4.times { puts &quot;testing&quot; }</code> or <code>4.times { |i| puts i }</code>.</p>

<p>For anyone coming from C#, ruby&#8217;s blocks can substitute for <code>using</code> in many places, like when opening a file:</p>
<div class='highlight'><pre><code class='ruby'><span class='no'>File</span><span class='o'>.</span><span class='n'>open</span><span class='p'>(</span><span class='s2'>&quot;tmp.txt&quot;</span><span class='p'>,</span> <span class='s2'>&quot;r&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>each</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>line</span><span class='o'>|</span>
    <span class='nb'>puts</span> <span class='n'>line</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>No need to worry about forgetting to <code>.close()</code> the file later on.</p>

<p>Here is my full code listing for the exercises from Day 2 of Ruby. The home of this piece of code is with the other exercises <a href='https://github.com/nickknw/seven-languages-in-seven-weeks/blob/master/week-1-ruby/day2.rb'>on github</a>.</p>
<div class='highlight'><pre><code class='ruby'><span class='c1'># Find:</span>
<span class='c1'># 1. Find out how to access files with and without code blocks. What is the</span>
<span class='c1'># benefit of the code block?</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>Find:&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>1.&quot;</span>

<span class='n'>file</span> <span class='o'>=</span> <span class='no'>File</span><span class='o'>.</span><span class='n'>open</span><span class='p'>(</span><span class='s2'>&quot;tmp.txt&quot;</span><span class='p'>,</span> <span class='s2'>&quot;w+&quot;</span><span class='p'>)</span>
<span class='n'>file</span><span class='o'>.</span><span class='n'>puts</span> <span class='s2'>&quot;a spoonful is great but I&#39;d rather have a bowl&quot;</span>
<span class='n'>file</span><span class='o'>.</span><span class='n'>close</span>

<span class='c1'># safer, less erroro-prone, shorter, more readable</span>
<span class='no'>File</span><span class='o'>.</span><span class='n'>open</span><span class='p'>(</span><span class='s2'>&quot;tmp.txt&quot;</span><span class='p'>,</span> <span class='s2'>&quot;r&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>each</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>line</span><span class='o'>|</span>
    <span class='nb'>puts</span> <span class='n'>line</span>
<span class='p'>}</span>


<span class='c1'># 2. How would you translate a hash to an array? Can you translate arrays to</span>
<span class='c1'># hashes?</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>2.&quot;</span>
<span class='n'>scores</span> <span class='o'>=</span> <span class='p'>{</span> <span class='n'>gary</span><span class='p'>:</span> <span class='mi'>5</span><span class='p'>,</span> <span class='n'>nick</span><span class='p'>:</span> <span class='mi'>11</span><span class='p'>,</span> <span class='n'>ted</span><span class='p'>:</span> <span class='mi'>8</span><span class='p'>,</span> <span class='n'>the_dude</span><span class='p'>:</span><span class='mi'>9</span> <span class='p'>}</span>
<span class='nb'>print</span> <span class='s2'>&quot;hash: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='n'>scores</span>
<span class='nb'>print</span> <span class='s2'>&quot;array1: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='n'>scores</span><span class='o'>.</span><span class='n'>to_a</span>
<span class='nb'>print</span> <span class='s2'>&quot;array2: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='n'>scores</span><span class='o'>.</span><span class='n'>to_a</span><span class='o'>.</span><span class='n'>flatten</span>

<span class='n'>scores_array1</span> <span class='o'>=</span> <span class='n'>scores</span><span class='o'>.</span><span class='n'>to_a</span>
<span class='nb'>print</span> <span class='s2'>&quot;array1 to hash again 1: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='n'>scores_array1</span><span class='o'>.</span><span class='n'>inject</span><span class='p'>(</span><span class='no'>Hash</span><span class='o'>.</span><span class='n'>new</span><span class='p'>)</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>memo</span><span class='p'>,</span> <span class='n'>pair</span><span class='o'>|</span> <span class='n'>memo</span><span class='o'>[</span><span class='n'>pair</span><span class='o'>.</span><span class='n'>first</span><span class='o'>]</span> <span class='o'>=</span> <span class='n'>pair</span><span class='o'>.</span><span class='n'>last</span><span class='p'>;</span> <span class='n'>memo</span> <span class='p'>}</span>
<span class='nb'>print</span> <span class='s2'>&quot;array1 to hash again 2: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='no'>Hash</span><span class='o'>[</span><span class='n'>scores_array1</span><span class='o'>]</span>
<span class='n'>scores_array2</span> <span class='o'>=</span> <span class='n'>scores</span><span class='o'>.</span><span class='n'>to_a</span><span class='o'>.</span><span class='n'>flatten</span>
<span class='nb'>print</span> <span class='s2'>&quot;array2 to hash again 1: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='no'>Hash</span><span class='o'>[</span><span class='n'>scores_array2</span><span class='o'>]</span>
<span class='nb'>print</span> <span class='s2'>&quot;array2 to hash again 2: &quot;</span><span class='p'>;</span> <span class='nb'>p</span> <span class='no'>Hash</span><span class='o'>[*</span><span class='n'>scores_array2</span><span class='o'>]</span>
<span class='nb'>puts</span> <span class='s2'>&quot;Yup.&quot;</span>

<span class='c1'># 3. Can you iterate through a hash?</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>3.&quot;</span>
<span class='n'>scores</span><span class='o'>.</span><span class='n'>each</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>key</span><span class='p'>,</span> <span class='n'>value</span><span class='o'>|</span> <span class='nb'>puts</span> <span class='s2'>&quot;key:&#39;</span><span class='si'>#{</span><span class='n'>key</span><span class='si'>}</span><span class='s2'>&#39;, value:&#39;</span><span class='si'>#{</span><span class='n'>value</span><span class='si'>}</span><span class='s2'>&#39;&quot;</span> <span class='p'>}</span>
<span class='nb'>puts</span> <span class='s2'>&quot;Yup.&quot;</span>

<span class='c1'># 4. You can use Ruby arrays as stacks. What other common data structures to</span>
<span class='c1'># arrays support?</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>4.&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;queue/deque: &quot;</span>
<span class='n'>deque</span> <span class='o'>=</span> <span class='o'>[].</span><span class='n'>push</span><span class='p'>(</span><span class='s2'>&quot;1&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>push</span><span class='p'>(</span><span class='s2'>&quot;2&quot;</span><span class='p'>)</span>
<span class='n'>deque</span><span class='o'>.</span><span class='n'>unshift</span><span class='p'>(</span><span class='s2'>&quot;a&quot;</span><span class='p'>)</span><span class='o'>.</span><span class='n'>unshift</span><span class='p'>(</span><span class='s2'>&quot;b&quot;</span><span class='p'>)</span>
<span class='nb'>p</span> <span class='n'>deque</span>
<span class='nb'>puts</span> <span class='n'>deque</span><span class='o'>.</span><span class='n'>shift</span>
<span class='nb'>puts</span> <span class='n'>deque</span><span class='o'>.</span><span class='n'>shift</span>
<span class='nb'>puts</span> <span class='n'>deque</span><span class='o'>.</span><span class='n'>pop</span>
<span class='nb'>puts</span> <span class='n'>deque</span><span class='o'>.</span><span class='n'>pop</span>

<span class='nb'>puts</span> <span class='s2'>&quot;list: &quot;</span>
<span class='n'>list</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>1</span><span class='p'>,</span><span class='mi'>2</span><span class='p'>,</span><span class='mi'>3</span><span class='o'>].</span><span class='n'>insert</span><span class='p'>(</span><span class='mi'>2</span><span class='p'>,</span> <span class='s2'>&quot;c&quot;</span><span class='p'>)</span>
<span class='nb'>puts</span> <span class='n'>list</span>
<span class='nb'>puts</span> <span class='s2'>&quot;removed: &quot;</span> <span class='o'>+</span> <span class='n'>list</span><span class='o'>.</span><span class='n'>delete</span><span class='p'>(</span><span class='s2'>&quot;c&quot;</span><span class='p'>)</span>

<span class='nb'>puts</span> <span class='s2'>&quot;(rudimentary) bag/set:&quot;</span>
<span class='n'>bag</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>1</span><span class='p'>,</span><span class='mi'>2</span><span class='p'>,</span><span class='mi'>3</span><span class='p'>,</span><span class='mi'>3</span><span class='p'>,</span><span class='mi'>4</span><span class='p'>,</span><span class='mi'>5</span><span class='o'>]</span>
<span class='nb'>p</span> <span class='n'>bag</span>
<span class='n'>set</span> <span class='o'>=</span> <span class='n'>bag</span><span class='o'>.</span><span class='n'>uniq</span>
<span class='n'>other_set</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>3</span><span class='p'>,</span><span class='mi'>5</span><span class='o'>]</span>
<span class='nb'>p</span> <span class='n'>set</span>
<span class='nb'>p</span> <span class='n'>set</span> <span class='o'>&amp;</span> <span class='n'>other_set</span>

<span class='nb'>puts</span> <span class='s2'>&quot;(rudimentary) matrix:&quot;</span>
<span class='n'>matrix</span> <span class='o'>=</span> <span class='o'>[[</span><span class='mi'>1</span><span class='p'>,</span><span class='mi'>2</span><span class='p'>,</span><span class='mi'>3</span><span class='o'>]</span><span class='p'>,</span><span class='o'>[</span><span class='mi'>4</span><span class='p'>,</span><span class='mi'>5</span><span class='p'>,</span><span class='mi'>6</span><span class='o'>]</span><span class='p'>,</span><span class='o'>[</span><span class='mi'>7</span><span class='p'>,</span><span class='mi'>8</span><span class='p'>,</span><span class='mi'>9</span><span class='o'>]]</span>
<span class='nb'>p</span> <span class='n'>matrix</span>
<span class='nb'>p</span> <span class='n'>matrix</span><span class='o'>.</span><span class='n'>transpose</span>


<span class='c1'># Do:</span>
<span class='c1'># 1. Print the contents of an array of sixteen numbers, four numbers at a time,</span>
<span class='c1'># using just each. Now, do the same with each_slice in Enumerable</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>Do:&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>1.&quot;</span>
<span class='n'>sixteen_numbers</span> <span class='o'>=</span> <span class='o'>[*</span><span class='p'>(</span><span class='mi'>1</span><span class='o'>.</span><span class='n'>.</span><span class='mi'>16</span><span class='p'>)</span><span class='o'>]</span>
<span class='n'>sixteen_numbers</span><span class='o'>.</span><span class='n'>each</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>number</span><span class='o'>|</span>
        <span class='nb'>p</span> <span class='n'>sixteen_numbers</span><span class='o'>[</span><span class='p'>((</span><span class='n'>number</span><span class='o'>-</span><span class='mi'>4</span><span class='p'>)</span><span class='o'>.</span><span class='n'>.</span><span class='o'>.</span><span class='n'>number</span><span class='p'>)</span><span class='o'>]</span> <span class='k'>if</span> <span class='n'>number</span> <span class='o'>%</span> <span class='mi'>4</span> <span class='o'>==</span> <span class='mi'>0</span>
<span class='k'>end</span>

<span class='nb'>puts</span> <span class='s2'>&quot;and&quot;</span>

<span class='n'>sixteen_numbers</span><span class='o'>.</span><span class='n'>each_slice</span><span class='p'>(</span><span class='mi'>4</span><span class='p'>)</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>slice</span><span class='o'>|</span> <span class='nb'>p</span> <span class='n'>slice</span> <span class='p'>}</span>


<span class='c1'># 2. The Tree class was interesting, but it did not allow you to specify a new</span>
<span class='c1'># tree with a clean user interface. Let the initializer accept a nested</span>
<span class='c1'># structure with hashes and arrays. You should be able to specify a tree like</span>
<span class='c1'># this: {&#39;grandpa&#39; =&gt; {&#39;dad&#39; =&gt; &#39;child 1&#39; =&gt; {}, &#39;child 2&#39; =&gt; {} }, &#39;uncle&#39; =&gt;</span>
<span class='c1'># {&#39;child 3&#39; =&gt; {}, &#39;child 4&#39; =&gt; {} } } }.</span>

<span class='k'>class</span> <span class='nc'>Tree</span>
    <span class='kp'>attr_accessor</span> <span class='ss'>:children</span><span class='p'>,</span> <span class='ss'>:node_name</span>

    <span class='k'>def</span> <span class='nf'>initialize</span><span class='p'>(</span><span class='nb'>name</span><span class='p'>,</span> <span class='n'>children</span><span class='o'>=[]</span><span class='p'>)</span>
        <span class='k'>if</span> <span class='nb'>name</span><span class='o'>.</span><span class='n'>respond_to?</span><span class='p'>(</span><span class='s1'>&#39;keys&#39;</span><span class='p'>)</span> <span class='k'>then</span>
            <span class='n'>root_node</span> <span class='o'>=</span> <span class='nb'>name</span><span class='o'>.</span><span class='n'>first</span>
            <span class='nb'>name</span> <span class='o'>=</span> <span class='n'>root_node</span><span class='o'>[</span><span class='mi'>0</span><span class='o'>]</span>
            <span class='n'>children</span> <span class='o'>=</span> <span class='n'>root_node</span><span class='o'>[</span><span class='mi'>1</span><span class='o'>]</span>
        <span class='k'>end</span>
        
        <span class='k'>if</span> <span class='n'>children</span><span class='o'>.</span><span class='n'>respond_to?</span><span class='p'>(</span><span class='s1'>&#39;keys&#39;</span><span class='p'>)</span> <span class='k'>then</span>
            <span class='n'>children</span> <span class='o'>=</span> <span class='n'>children</span><span class='o'>.</span><span class='n'>map</span> <span class='p'>{</span><span class='o'>|</span><span class='n'>child_name</span><span class='p'>,</span> <span class='n'>grandchildren</span><span class='o'>|</span> <span class='no'>Tree</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='n'>child_name</span><span class='p'>,</span> <span class='n'>grandchildren</span><span class='p'>)</span> <span class='p'>}</span>
        <span class='k'>end</span>

        <span class='vi'>@node_name</span> <span class='o'>=</span> <span class='nb'>name</span>
        <span class='vi'>@children</span> <span class='o'>=</span> <span class='n'>children</span>
    <span class='k'>end</span>

    <span class='k'>def</span> <span class='nf'>visit_all</span><span class='p'>(</span><span class='o'>&amp;</span><span class='n'>block</span><span class='p'>)</span>
        <span class='n'>visit</span><span class='p'>(</span><span class='o'>&amp;</span><span class='n'>block</span><span class='p'>)</span>
        <span class='n'>children</span><span class='o'>.</span><span class='n'>each</span> <span class='p'>{</span><span class='o'>|</span><span class='n'>c</span><span class='o'>|</span> <span class='n'>c</span><span class='o'>.</span><span class='n'>visit_all</span><span class='p'>(</span><span class='o'>&amp;</span><span class='n'>block</span><span class='p'>)}</span>
    <span class='k'>end</span>

    <span class='k'>def</span> <span class='nf'>visit</span><span class='p'>(</span><span class='o'>&amp;</span><span class='n'>block</span><span class='p'>)</span>
        <span class='n'>block</span><span class='o'>.</span><span class='n'>call</span> <span class='nb'>self</span>
    <span class='k'>end</span>
<span class='k'>end</span>

<span class='n'>tree_test</span> <span class='o'>=</span> <span class='no'>Tree</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='s2'>&quot;Ruby&quot;</span><span class='p'>,</span>
    <span class='o'>[</span><span class='no'>Tree</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='s2'>&quot;Reia&quot;</span><span class='p'>),</span>
     <span class='no'>Tree</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='s2'>&quot;MacRuby&quot;</span><span class='p'>)</span><span class='o'>]</span> <span class='p'>)</span>

<span class='n'>tree_test2</span> <span class='o'>=</span> <span class='no'>Tree</span><span class='o'>.</span><span class='n'>new</span><span class='p'>({</span><span class='s2'>&quot;Ruby&quot;</span> <span class='o'>=&gt;</span>
    <span class='p'>{</span><span class='s2'>&quot;Reia&quot;</span> <span class='o'>=&gt;</span> <span class='p'>{},</span>
    <span class='s2'>&quot;MacRuby&quot;</span> <span class='o'>=&gt;</span> <span class='p'>{}}</span>
<span class='p'>})</span>

<span class='n'>tree_test</span><span class='o'>.</span><span class='n'>visit_all</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>node</span><span class='o'>|</span> <span class='nb'>p</span> <span class='n'>node</span><span class='o'>.</span><span class='n'>node_name</span> <span class='p'>}</span>
<span class='n'>tree_test2</span><span class='o'>.</span><span class='n'>visit_all</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>node</span><span class='o'>|</span> <span class='nb'>p</span> <span class='n'>node</span><span class='o'>.</span><span class='n'>node_name</span> <span class='p'>}</span>


<span class='c1'># 3. Write a simple grep that will print the lines of a file having any</span>
<span class='c1'># occurrences of a phrase anywhere in that line. you will need to do a simple</span>
<span class='c1'># regular expression match and read lines from a file. (This is surprisingly</span>
<span class='c1'># simple in Ruby.) If you want, include line numbers.</span>
<span class='k'>def</span> <span class='nf'>rbgrep</span><span class='p'>(</span><span class='n'>pattern</span><span class='p'>,</span> <span class='n'>filename</span><span class='p'>)</span>
    <span class='n'>regexp</span> <span class='o'>=</span> <span class='no'>Regexp</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='n'>pattern</span><span class='p'>)</span>
    <span class='no'>File</span><span class='o'>.</span><span class='n'>foreach</span><span class='p'>(</span><span class='n'>filename</span><span class='p'>)</span><span class='o'>.</span><span class='n'>with_index</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>line</span><span class='p'>,</span> <span class='n'>line_num</span><span class='o'>|</span>
        <span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='si'>#{</span><span class='n'>line_num</span><span class='si'>}</span><span class='s2'>: </span><span class='si'>#{</span><span class='n'>line</span><span class='si'>}</span><span class='s2'>&quot;</span> <span class='k'>if</span> <span class='n'>regexp</span> <span class='o'>=~</span> <span class='n'>line</span>
    <span class='p'>}</span>
<span class='k'>end</span>

<span class='n'>rbgrep</span><span class='p'>(</span><span class='s2'>&quot;guitar&quot;</span><span class='p'>,</span> <span class='s2'>&quot;wikipedia_page.txt&quot;</span><span class='p'>)</span>
</code></pre>
</div>
<p>And the output:</p>

<pre><code>$ ruby day2.rb

Find:

1.
a spoonful is great but I&#39;d rather have a bowl

2.
hash: {:gary=&gt;5, :nick=&gt;11, :ted=&gt;8, :the_dude=&gt;9}
array1: [[:gary, 5], [:nick, 11], [:ted, 8], [:the_dude, 9]]
array2: [:gary, 5, :nick, 11, :ted, 8, :the_dude, 9]
array1 to hash again 1: {:gary=&gt;5, :nick=&gt;11, :ted=&gt;8, :the_dude=&gt;9}
array1 to hash again 2: {:gary=&gt;5, :nick=&gt;11, :ted=&gt;8, :the_dude=&gt;9}
array2 to hash again 1: {}
array2 to hash again 2: {:gary=&gt;5, :nick=&gt;11, :ted=&gt;8, :the_dude=&gt;9}
Yup.

3.
key:&#39;gary&#39;, value:&#39;5&#39;
key:&#39;nick&#39;, value:&#39;11&#39;
key:&#39;ted&#39;, value:&#39;8&#39;
key:&#39;the_dude&#39;, value:&#39;9&#39;
Yup.

4.
queue/deque: 
[&quot;b&quot;, &quot;a&quot;, &quot;1&quot;, &quot;2&quot;]
b
a
2
1
list: 
1
2
c
3
removed: c
(rudimentary) bag/set:
[1, 2, 3, 3, 4, 5]
[1, 2, 3, 4, 5]
[3, 5]
(rudimentary) matrix:
[[1, 2, 3], [4, 5, 6], [7, 8, 9]]
[[1, 4, 7], [2, 5, 8], [3, 6, 9]]

Do:

1.
[1, 2, 3, 4]
[5, 6, 7, 8]
[9, 10, 11, 12]
[13, 14, 15, 16]
and
[1, 2, 3, 4]
[5, 6, 7, 8]
[9, 10, 11, 12]
[13, 14, 15, 16]
&quot;Ruby&quot;
&quot;Reia&quot;
&quot;MacRuby&quot;
&quot;Ruby&quot;
&quot;Reia&quot;
&quot;MacRuby&quot;
15: bass) and Andre Olbrich (guitar) under the name Lucifer&#39;s Heritage. The band
17: changes: Markus Dörk (guitar) and Thomen Stauch (drums) were replaced by
48: Nightfall, bass guitar has been played by sessional member Oliver Holzwarth,
55: orchestral backing and a consistent vocal and guitar layering throughout.[9]
87: Blind Guardian&#39;s music features the staccato guitars and double bass drumming
90: the guitar and vocal tracks, creates the impression of a vast army of musicians</code></pre>

<p>Next in this series: <a href='/blog/2011/12/15/seven-languages-week-1-day-2/'>Day 3 of Ruby</a>.</p>
  </div>

  <div style="margin-top:20px; font-size:14px;">
    <a href="/blog/2011/12/04/seven-languages-week-1-day-2/#disqus_thread" data-disqus-identifier="/blog/2011/12/04/seven-languages-week-1-day-2">Comments</a>
  </div>

    <hr class="fancyrule" />

  <div>
  <h1 style="margin:0px"><a href="/blog/2011/11/27/seven-languages-week-1-day-1/">
  Seven Languages In Seven Weeks: Week 1 (Ruby) - Day 1
  </a></h1>
  <div class="faded" style="font-size:14px; margin-bottom:5px;">27 Nov 2011</div>
  <p>Out of the seven languages in this book, Ruby is the one I was most familiar with previously. It made for an easy start, and gave me a bit of momentum before I started to tackle languages like Prolog. I&#8217;m appreciative of that, because Prolog sure was a struggle for a while.</p>
<div class='interjection'><p>
(This article is part of a series of posts I am doing about my journey through the exercises of the book <a href='http://pragprog.com/book/btlang/seven-languages-in-seven-weeks'>Seven Languages In Seven Weeks</a>. This article is the first one in the series. For an overview see the <a href='/projects/seven-languages-in-seven-weeks/'>project page</a>.)
</p></div>
<p>Day 1 of Week 1 was pretty basic - a bit of string manipulation and looping. Ruby makes things like this very short and pretty.</p>

<p>For example, being able to repeat a string like: <code>&quot;Nick &quot; * 10</code> or loop like: <code>(1..10).each { |num| do_stuff(num) }</code> is great.</p>

<p>Here is my full code listing for the exercises from Day 1 of Ruby. The home of this piece of code is with the other exercises <a href='https://github.com/nickknw/seven-languages-in-seven-weeks/blob/master/week-1-ruby/day1.rb'>on github</a>.</p>
<div class='highlight'><pre><code class='ruby'><span class='c1'># Find:</span>
<span class='c1'># 1. A method that substitutes a part of a string</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>Find:&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>1.&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;BAM&quot;</span><span class='o'>.</span><span class='n'>gsub</span> <span class='s2'>&quot;M&quot;</span><span class='p'>,</span> <span class='s2'>&quot;TMAN&quot;</span>


<span class='c1'># Do:</span>
<span class='c1'># 1. Print the string &quot;Hello World&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>Do:&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>1.&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;Hello World&quot;</span>

<span class='c1'># 2. For the string &quot;Hello, Ruby,&quot; find the index of the word &quot;Ruby.&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>2.&quot;</span>
<span class='c1'># literally:</span>
<span class='nb'>p</span> <span class='s2'>&quot;Hello, Ruby,&quot;</span><span class='o'>.</span><span class='n'>index</span> <span class='s2'>&quot;Ruby.&quot;</span>
<span class='c1'># realistically:</span>
<span class='nb'>puts</span> <span class='s2'>&quot;Hello, Ruby&quot;</span><span class='o'>.</span><span class='n'>index</span> <span class='s2'>&quot;Ruby&quot;</span>

<span class='c1'># 3. Print your name ten times</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>3.&quot;</span>
<span class='nb'>puts</span> <span class='s2'>&quot;Nick &quot;</span> <span class='o'>*</span> <span class='mi'>10</span>

<span class='c1'># 4. Print the string &quot;This is sentence number 1,&quot; where the number 1 changes</span>
<span class='c1'># from 1 to 10</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>4.&quot;</span>
<span class='p'>(</span><span class='mi'>1</span><span class='o'>.</span><span class='n'>.</span><span class='mi'>10</span><span class='p'>)</span><span class='o'>.</span><span class='n'>each</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>num</span><span class='o'>|</span> <span class='nb'>puts</span> <span class='s2'>&quot;This is sentence number </span><span class='si'>#{</span><span class='n'>num</span><span class='si'>}</span><span class='s2'>&quot;</span> <span class='p'>}</span>

<span class='c1'># Bonus: Write a program that picks a random number. Let a player guess the</span>
<span class='c1'># number, telling the player whether the guess is too low or too high.</span>
<span class='nb'>puts</span> <span class='s2'>&quot;</span><span class='se'>\n</span><span class='s2'>Bonus:&quot;</span>

<span class='n'>random_number</span> <span class='o'>=</span> <span class='nb'>rand</span><span class='p'>(</span><span class='mi'>1000</span><span class='p'>)</span> <span class='o'>+</span> <span class='mi'>1</span>
<span class='n'>guess</span> <span class='o'>=</span> <span class='mi'>0</span>

<span class='k'>while</span> <span class='n'>guess</span> <span class='o'>!=</span> <span class='n'>random_number</span> <span class='k'>do</span>
    <span class='nb'>print</span> <span class='s2'>&quot;Pick a number between 1 and 1000: &quot;</span>
    <span class='n'>guess</span> <span class='o'>=</span> <span class='nb'>gets</span><span class='o'>.</span><span class='n'>to_i</span>
    <span class='nb'>puts</span> <span class='s2'>&quot;Too low!&quot;</span> <span class='k'>if</span> <span class='n'>guess</span> <span class='o'>&lt;</span> <span class='n'>random_number</span>
    <span class='nb'>puts</span> <span class='s2'>&quot;Too high!&quot;</span> <span class='k'>if</span> <span class='n'>guess</span> <span class='o'>&gt;</span> <span class='n'>random_number</span>
<span class='k'>end</span>

<span class='nb'>puts</span> <span class='s2'>&quot;Got it! It was </span><span class='si'>#{</span><span class='n'>random_number</span><span class='si'>}</span><span class='s2'>&quot;</span>
</code></pre>
</div>
<p>And the output:</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>ruby day1.rb

Find:

1.
BATMAN

Do:

1.
Hello World

2.
nil
7

3.
Nick Nick Nick Nick Nick Nick Nick Nick Nick Nick 

4.
This is sentence number 1
This is sentence number 2
This is sentence number 3
This is sentence number 4
This is sentence number 5
This is sentence number 6
This is sentence number 7
This is sentence number 8
This is sentence number 9
This is sentence number 10

Bonus:
Pick a number between 1 and 1000: 500
Too high!
Pick a number between 1 and 1000: 250
Too high!
Pick a number between 1 and 1000: 125
Too low!
Pick a number between 1 and 1000: 192
Too high!
Pick a number between 1 and 1000: 158
Too high!
Pick a number between 1 and 1000: 141
Too high!
Pick a number between 1 and 1000: 133
Too high!
Pick a number between 1 and 1000: 129
Got it! It was 129
</code></pre>
</div>
<p>Next in this series: <a href='/blog/2011/12/04/seven-languages-week-1-day-2/'>Day 2 of Ruby</a></p>
  </div>

  <div style="margin-top:20px; font-size:14px;">
    <a href="/blog/2011/11/27/seven-languages-week-1-day-1/#disqus_thread" data-disqus-identifier="/blog/2011/11/27/seven-languages-week-1-day-1">Comments</a>
  </div>

    <hr class="fancyrule" />


<a href="/blog/archive/">← Older posts</a>

  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'nickknowlson'; // required: replace example with your forum shortname
  
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
  </script>

            </div>
        </div>
        <div id="footer">&copy; Copyright 2011 Nick Knowlson</div>
        <div style="display: none;">Content by Nick Knowlson: <a href="https://plus.google.com/111820015518413982003?rel=author">Google+</a></div>
        <!--  " - 2011" -->
    </body>
</html>
